<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>boot</title>
<link href="nscripter.css" rel="stylesheet" type="text/css">
</head>
<body><h2>NScripter2的启动详情</h2>
<p><a href="index.html">回到目录</a></p>
<p>NScr2.exe在启动之后首先会去寻找<strong>root.lua</strong>这个文件。它是使用“Lua”语言编写的。</p>
<p>root.lua包含了生成程序窗口前必要的设定值，比如窗口画面的大小。如果你不是很懂Lua语言的话，可以跳过此文件。因为详细的动作设定也可以通过命令来实现。</p>
<p>比如，将<strong>gui.create(1024,768)</strong>这条语句中的数字改变的话，会引起游戏窗口分辨率的改变。请记住这种类似的调用。</p>
<p>接下来，下面的<strong>basic.utf8_flag=0</strong>中，如果将0变为1的话，BASIC里面源代码就要使用UTF-8来编写（默认是SHIFT-JIS编码）。用于解决显示只有UTF-8编码下才有的文字（例如❤）的问题，或者觉得UTF-8编码更好的用户请使用这个值。</p>
<p>接下来，root.lua会读取默认的<strong>system.lua</strong>来执行下面的操作。那里面记述了BASIC各个命令的功能。<strong>没有修改那里面的必要。</strong>（作为开发方面需要在版本更新上修改，会通过更新包的形式修改或更新此文件。因此请不要修改这里面的内容）。</p>
<p>读取完成system.lua上面的内容之后，会启动BASIC步骤。<strong>BASIC是指读取0.txt~9.txt，00.txt~99.txt，000.txt~999.txt文件。</strong>0.txt和00.txt以及000.txt同时存在没有影响。但是为了使流程清晰，请使用统一的编号。例如00.txt~99.txt就足够了。</p>
<p>因此，可以从这些脚本文件（root.lua，system.lua，以及用户脚本（User Scrpit），BASIC脚本（数字.txt~）），以及ns2打包文件进行读取。和旧版本的NScripter不同，NScripter2的脚本和数据文件不再分别的存储在不同的打包中。数据的打包中也会存放脚本文件。</p>
<p>除了nscr2.exe之外，安装包里的config.exe文件是为了设置在Windows Aero环境下会导致启动异常的情况，以及进行Debug时使用的。它们的文件是和nscr2.exe同一目录下的config.exe和config.def文件。</p>
<p>config.def可以通过手动编辑来调整设定。设定的格式如后文所述。可以通过BASIC的getconfig或者Lua的gui.getconfig读取config.ini文件的值来获得设定值，并在用户侧的启动前设定中使用。</p>
<pre><code>
項目数
１つ目の項目の名前
１つ目の項目の説明
１つ目の選択肢数
１つ目の選択肢１のテキスト(値0に相当)
１つ目の選択肢２のテキスト(値1に相当)
.
.選択肢の数だけ
.
１つ目のiniファイル上のキー変数の名前
２つ目の項目の名前
２つ目の項目の説明
２つ目の選択肢数
.
.項目の数だけ
.
</code></pre>
<p>
输出会保存到config.ini文件中。ini文件不存在时会所有选项赋值为0。也就是说，选择支的最初选择是（对应0那个值的）默认值。
</p>
<p>NScripter2在执行的时候会生成savedata文件夹。在发布游戏的时候请不要将这个文件夹混入其中（因为这样会保留一些试玩时的存档文件）。</p>
<p>
修改nscr2.exe的名字以及更改它的图标都不影响其运行。修改了图标运行的免费软件比比皆是，详细的情况请以“exe变换图标”等为关键字搜索。</p>
<a href="index.html">回到目录</a>
</p>
</body>
</html>
